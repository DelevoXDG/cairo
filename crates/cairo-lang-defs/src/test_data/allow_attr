//! > Test allow_attr functionality

//! > test_runner_name
test_allow_attr

//! > cairo_code
#[allow_attr(some)]
#[some]
fn foo() {}

#[some]
fn bar() {}

#[allow_attr(my_attr = "value")]
fn named_arg() {}

#[allow_attr(1234)]
fn invalid_number() {}

#[allow_attr("string")]
fn invalid_string() {}

#[allow_attr(a::b)]
fn invalid_path() {}

#[allow_attr(attr1, attr2, attr3)]
struct MultiAttr {
    #[attr1]
    x: felt252,
    #[attr2]
    y: felt252,
    #[attr3]
    z: felt252,
    #[attr4]
    w: felt252,
}

#[allow_attr(outer)]
struct MyStruct {
    #[allow_attr(inner)]
    #[inner]
    x: felt252,
    #[outer]
    y: felt252,
    #[other]
    z: felt252,
}

//! > generated_cairo_code
#[allow_attr(some)]
#[some]
fn foo() {}

#[some]
fn bar() {}

#[allow_attr(my_attr = "value")]
fn named_arg() {}

#[allow_attr(1234)]
fn invalid_number() {}

#[allow_attr("string")]
fn invalid_string() {}

#[allow_attr(a::b)]
fn invalid_path() {}

#[allow_attr(attr1, attr2, attr3)]
struct MultiAttr {
    #[attr1]
    x: felt252,
    #[attr2]
    y: felt252,
    #[attr3]
    z: felt252,
    #[attr4]
    w: felt252,
}

#[allow_attr(outer)]
struct MyStruct {
    #[allow_attr(inner)]
    #[inner]
    x: felt252,
    #[outer]
    y: felt252,
    #[other]
    z: felt252,
}

//! > expected_diagnostics
error: Unsupported attribute.
 --> src/lib.cairo:5:1
#[some]
^^^^^^^


error: Expected simple identifier.
 --> src/lib.cairo:8:14
#[allow_attr(my_attr = "value")]
             ^^^^^^^^^^^^^^^^^


error: Expected simple identifier.
 --> src/lib.cairo:11:14
#[allow_attr(1234)]
             ^^^^


error: Expected simple identifier.
 --> src/lib.cairo:14:14
#[allow_attr("string")]
             ^^^^^^^^


error: Expected simple identifier.
 --> src/lib.cairo:17:14
#[allow_attr(a::b)]
             ^^^^


error: Unsupported attribute.
 --> src/lib.cairo:34:5
    #[attr4]
    ^^^^^^^^


error: Unsupported attribute.
 --> src/lib.cairo:45:5
    #[other]
    ^^^^^^^^
